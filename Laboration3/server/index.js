var Hapi = require("hapi");

var server = new Hapi.Server(9099, { cors: true });
var request = require('request');

server.route({
    path: '/traffic',
    method: 'GET',
    handler: function(_, reply) {
        //request('http://api.sr.se/api/v2/traffic/messages?size=1000&format=json', function (error, response, body) {
        //    console.log(body);
        //    if (!error && response.statusCode == 200) {
        //        var data = JSON.parse(body);
        //        data.messages = data.messages
        //            .map(function(message) {
        //                message.createddate = new Date(+message.createddate.slice(6, -7)).getTime();
        //                return message;
        //            })
        //            .sort(function(a, b) {
        //                return b.createddate - a.createddate;
        //            })
        //            .slice(0, 100);
        //
        //        reply(data);
        //    }
        //});
        var data = {"copyright":"Copyright Sveriges Radio 2014. All rights reserved.","messages":[{"id":1181048,"priority":3,"createddate":"\/Date(1405914121003+0200)\/","title":"E10 Gällivare-Svappavaara ","exactlocation":"","description":"Vägarbete, bl a asfaltering. Hastighetsbegränsning. Risk för stenskott.","latitude":67.383895874023437,"longitude":21.083175659179688,"category":0,"subcategory":"Vägarbete"},{"id":1115618,"priority":5,"createddate":"\/Date(1407729295770+0200)\/","title":"E6 Inre ringvägen Malmö","exactlocation":"Västkustvägen tpl Spillepengen","description":"Stor risk för köer pga ombyggnad. Valmöjligheterna i rondellen begränsas och trafiken måste välja andra vägar.","latitude":55.633197784423828,"longitude":13.055941581726074,"category":0,"subcategory":"Vägarbete"},{"id":1126561,"priority":3,"createddate":"\/Date(1408259210733+0200)\/","title":"Kungälv Jordfallsbron","exactlocation":"Bohus - Kungälv","description":"Arbeten på bron med att byta kantbalk. Planerna är att två körfält kommer att vara öppna i den riktning som är hårdast belastad.","latitude":57.855087280273438,"longitude":12.01069164276123,"category":0,"subcategory":"Trafikstörning"},{"id":1205525,"priority":5,"createddate":"\/Date(1410992781797+0200)\/","title":"Sollefteå kommun","exactlocation":"Långbjörns kraftstation söder om Junsele","description":"Pga arbeten vid kraftstationen stängs vägen över dammen mellan Röåns skjutbana och rv 90. Avstängt för all trafik från 26/7 till 31/3 2015. ","latitude":63.637242114815805,"longitude":16.777747164619381,"category":0,"subcategory":"Vägarbete"},{"id":1248089,"priority":5,"createddate":"\/Date(1411483227807+0200)\/","title":"Rv 13 Hörby–Sjöbo","exactlocation":"Mellan Östraby och Korsholm","description":"Begränsad framkomlighet pga beläggningsarbete.","latitude":55.781333923339844,"longitude":13.67626953125,"category":0,"subcategory":"Vägarbete"},{"id":1259071,"priority":3,"createddate":"\/Date(1411616582457+0200)\/","title":"Skene","exactlocation":"Korsningen Varbergsvägen/Assbergsgatan ","description":"Rondellbygge. Trångt att passera. Välj gärna annan väg. Arbetet beräknas vara klart 28 november.","latitude":57.4944531052551,"longitude":12.661412541362289,"category":0,"subcategory":"Vägarbete"},{"id":1263022,"priority":3,"createddate":"\/Date(1412075552313+0200)\/","title":"Rv 40 Ulricehamn","exactlocation":"","description":"Trafiken leds förbi arbetsplatsen på en kommunal gata, Rönnåsvägen. Arbete med att bygga den nya rv 40","latitude":57.803955078125,"longitude":13.475101470947266,"category":0,"subcategory":"Vägarbete"},{"id":1248634,"priority":5,"createddate":"\/Date(1412601229077+0200)\/","title":"E22 Sölvesborg-Norje","exactlocation":"Tpl Listerlandet (47)-Ysane i båda riktningar","description":"Korsningen ut till E22 från väg 510 är stängd. Trafiken leds på ett körfält i vardera riktning. ","latitude":56.073055267333984,"longitude":14.639775276184082,"category":0,"subcategory":"Vägarbete"},{"id":1258938,"priority":3,"createddate":"\/Date(1412654016290+0200)\/","title":"E22 Sölvesborg-Karlshamn","exactlocation":"Pukavik-tpl Mörrum Väst (49)","description":"Asfalteringsarbete med tidvis långa köer.","latitude":56.174884796142578,"longitude":14.713122367858887,"category":0,"subcategory":"Vägarbete"},{"id":1236052,"priority":3,"createddate":"\/Date(1412659894607+0200)\/","title":"Lv 1610 Viskafors-Rydboholm","exactlocation":"Varbergsvägen","description":"Brorenovering. Avstängt. Omledning.","latitude":57.648490905761719,"longitude":12.879611015319824,"category":0,"subcategory":"Vägarbete"},{"id":1205426,"priority":3,"createddate":"\/Date(1412939188727+0200)\/","title":"Rv 47 Vetlanda–Målilla","exactlocation":"Vetlanda–Sjunnen","description":"Risk för köer i rusningstrafik. Ombyggnad till 2+1 väg.","latitude":57.423740386962891,"longitude":15.131661415100098,"category":0,"subcategory":"Vägarbete"},{"id":1228303,"priority":3,"createddate":"\/Date(1413171991327+0200)\/","title":"Rv 25 Halmstad","exactlocation":"Halmstad Östra (44)","description":"Ett körfält avstängt och sänkt hastighet gäller i trafikplatsen. Nybyggnation av två rondeller. Pågår fram till sommaren 2015.","latitude":56.673587799072266,"longitude":12.895183563232422,"category":0,"subcategory":"Vägarbete"},{"id":1272160,"priority":3,"createddate":"\/Date(1413360787117+0200)\/","title":"E22 Sölvesborg–Karlshamn","exactlocation":"Pukavik Södra–tpl Mörrum Öst (50), i båda riktningar","description":"Omledning av trafik. Följ orange vägvisning.","latitude":56.160846710205078,"longitude":14.679495811462402,"category":0,"subcategory":"Vägarbete"},{"id":1266974,"priority":3,"createddate":"\/Date(1413949458943+0200)\/","title":"Rv 27/41 Borås","exactlocation":"Varbergsvägen till och från Borås","description":"Bygge av ny väg mellan Kråkered-Viared. Trafikljusen nu bortplockade. ","latitude":57.682376861572266,"longitude":12.935855865478516,"category":0,"subcategory":"Vägarbete"},{"id":1280719,"priority":3,"createddate":"\/Date(1414421466287+0100)\/","title":"E45 Marieholmsleden","exactlocation":"Vid Slakthusgatan","description":"Broarbete i riktning mot centrum.","latitude":57.731510162353516,"longitude":11.99988842010498,"category":0,"subcategory":"Vägarbete"},{"id":1278222,"priority":3,"createddate":"\/Date(1414485760700+0100)\/","title":"E4 Piteå-Norrfjärden","exactlocation":"Boviken-Norrfjärden","description":"Ombyggnation av E4 till 2+1 väg med mittvajer. ","latitude":65.3726806640625,"longitude":21.42949104309082,"category":0,"subcategory":"Vägarbete"},{"id":1282409,"priority":3,"createddate":"\/Date(1415034558677+0100)\/","title":"Göteborg","exactlocation":"Lisebergsstationen","description":"Mån-fre 3/11-2/12 mellan 08:50 och 16:00 är det spårändringar på Lisebergs station. Tågen kan gå från andra spår än normalt","latitude":57.697475554321258,"longitude":11.991533735052917,"category":1,"subcategory":"Tåg"},{"id":1272716,"priority":5,"createddate":"\/Date(1415103788277+0100)\/","title":"Lv 824 Leipikvattnet -Stekenjokk","exactlocation":"","description":"Vägen är stängd vintertid.","latitude":64.950035095214844,"longitude":14.196930885314941,"category":0,"subcategory":"Trafikstörning"},{"id":1265946,"priority":5,"createddate":"\/Date(1415103825157+0100)\/","title":"Lv 623 Håkansta","exactlocation":"Håkanstafärjan","description":"Påfartsrampen till färjan har nedsatt bärighet till max 4 ton. Berör tung trafik. Gäller tills vidare.","latitude":63.136157989501953,"longitude":14.321918487548828,"category":0,"subcategory":"Trafikstörning"},{"id":1212188,"priority":3,"createddate":"\/Date(1408596612090+0200)\/","title":"E12 Lycksele-Storuman","exactlocation":"Åskilje, i båda riktningar","description":"Trafik dirigeras med trafikljus och lots pga beläggningsarbete.","latitude":65.009452819824219,"longitude":17.670541763305664,"category":0,"subcategory":"Vägarbete"},{"id":1286816,"priority":3,"createddate":"\/Date(1415191943323+0100)\/","title":"E22 Kristianstad–Tollarp","exactlocation":"Vid Nöbbelöv i båda riktningar","description":"Trafiken regleras med vakt och lots. Mycket långa köer.","latitude":55.9665641784668,"longitude":14.073190689086914,"category":0,"subcategory":"Vägarbete"},{"id":1279124,"priority":4,"createddate":"\/Date(1415767421053+0100)\/","title":"Jämtlands län","exactlocation":"Midskog, Lillsjöhögen, Ismundbacken, Åsgård, Rissna. ","description":"Under hela november. Lågt flygande helikopter. Korta strömavbrott kan förekomma även i Norr/Sör-Greningen, Brynjegård, Källåsen och Fjällandet.","latitude":63.237231454784734,"longitude":15.210127242515512,"category":3,"subcategory":"Buller"},{"id":1240737,"priority":3,"createddate":"\/Date(1416034897950+0100)\/","title":"Rv 51 Finspång","exactlocation":"Norrköpingsvägen. Korsningen rv 51/Slottsgatan","description":"Begränsad framkomlighet och risk för köbildning. Byggnation av rondell. ","latitude":58.705530830692638,"longitude":15.785864334178813,"category":0,"subcategory":"Vägarbete"},{"id":1197539,"priority":3,"createddate":"\/Date(1416044972530+0100)\/","title":"Rv 21 Hässleholm-Kristianstad","exactlocation":"Ullstorp-Vanneberga","description":"Bygge av 2+1 väg. Hastighetsbegränsning 70 km/h.","latitude":56.068260192871094,"longitude":13.947724342346191,"category":0,"subcategory":"Vägarbete"},{"id":1294013,"priority":3,"createddate":"\/Date(1416289923260+0100)\/","title":"Göteborg","exactlocation":"Södra skärgården","description":"Risk för förseningar i färjtrafiken i tre veckor på grund av att Valö tas in för motorbyte och ersätts med Vipan som har lägre fart än snabbåtarna.\n","latitude":57.662015386062372,"longitude":11.839291262855676,"category":1,"subcategory":"Färja"},{"id":1294038,"priority":3,"createddate":"\/Date(1416376298057+0100)\/","title":"Lv 512 Sudret","exactlocation":"På vägen förbi Sigsarve, Näs kyrka ut till Näsudden","description":"Begränsad framkomlighet.","latitude":57.118545532226563,"longitude":18.259946823120117,"category":0,"subcategory":"Vägarbete"},{"id":1294052,"priority":3,"createddate":"\/Date(1416376795310+0100)\/","title":"Oscarsleden Järntorget - Majorna","exactlocation":"I höjd med Danmarksterminalen","description":"Portalarbete  i riktning mot Frölunda mellan 09:00-15:00. Ett körfält avstängt.","latitude":57.701194763183594,"longitude":11.948276519775391,"category":0,"subcategory":"Vägarbete"},{"id":1294695,"priority":3,"createddate":"\/Date(1416379643500+0100)\/","title":"E6 Göteborg-Mölndal","exactlocation":"Olskroksmotet till Ullevimotet ","description":"Arbete med belysningsarbete och arbete med bullerplank. Tidvis stänger man påfarten till E6.\n","latitude":57.7116813659668,"longitude":11.996500015258789,"category":0,"subcategory":"Vägarbete"},{"id":1293436,"priority":3,"createddate":"\/Date(1416382944537+0100)\/","title":"E4 Timrå-Sundsvall","exactlocation":"Mellan Birsta och Bydalen","description":"Rörligt arbete, montering av sidoräcken, dagtid 06 - 18. Höger körfält avstängt där arbete sker. Köer kan bildas till och från. ","latitude":62.441677093505859,"longitude":17.336509704589844,"category":0,"subcategory":"Vägarbete"},{"id":1291547,"priority":3,"createddate":"\/Date(1416467131920+0100)\/","title":"Lv 730 Tjörn","exactlocation":"Kolleröd till Björholmen","description":"Avstängda körfält vid arbetet med att förlänga bron.","latitude":58.042812347412109,"longitude":11.526355743408203,"category":0,"subcategory":"Vägarbete"},{"id":1295320,"priority":3,"createddate":"\/Date(1416467687613+0100)\/","title":"Rv 26 Kristinehamn-Storfors","exactlocation":"Vid Bergsjö","description":"Räckesarbeten. Trafikljus reglerar trafiken.","latitude":59.424488067626953,"longitude":14.222772598266602,"category":0,"subcategory":"Vägarbete"},{"id":1289649,"priority":5,"createddate":"\/Date(1416474461660+0100)\/","title":"Lv747 Dormsjö-Brovallen ","exactlocation":"","description":"Fällning av ett stort antal alléträd i höjd med Kloster. Skylift används, varav vägen behöver vara avstängd. Arbetet utförs måndag till fredag mellan kl 08.00-15.00. ","latitude":60.370918273925781,"longitude":16.16351318359375,"category":0,"subcategory":"Vägarbete"},{"id":1293594,"priority":3,"createddate":"\/Date(1416499549720+0100)\/","title":"Lv 845 Bor","exactlocation":"Bron över Bårsån","description":"Broarbete.","latitude":59.559253692626953,"longitude":15.286935806274414,"category":0,"subcategory":"Vägarbete"},{"id":1147853,"priority":3,"createddate":"\/Date(1416572984703+0100)\/","title":"Jönköping","exactlocation":"Teater- och Museirondellen","description":"Öppet för all trafik igen, dock kvarstår linjemålning. Signalanläggningen testkörs 21/11 vilket innebär att biltrafiken får rött ljus när bussar ska fram. Var uppmärksam på detta när ni passerar.","latitude":57.778144915539876,"longitude":14.174143777785334,"category":0,"subcategory":"Vägarbete"},{"id":1295423,"priority":3,"createddate":"\/Date(1416573414607+0100)\/","title":"Rv 61 Skåre-Karlstad","exactlocation":"Från Katås till Bergviksmotet","description":"Räckesarbeten.","latitude":59.379234313964844,"longitude":13.428887367248535,"category":0,"subcategory":"Vägarbete"},{"id":1296320,"priority":4,"createddate":"\/Date(1416579748090+0100)\/","title":"Ljungskile","exactlocation":"Hälle och Lyckorna","description":"Renspolning av vattenledningarna sker 24 nov–12 dec. Vattnet stängs av vid olika tider och berörda hushåll meddelas per post två dagar innan.  Inga kemikalier används och vattnet är ofarligt.","latitude":58.215723715578676,"longitude":11.907643089049248,"category":3,"subcategory":"Vatten"},{"id":1296228,"priority":3,"createddate":"\/Date(1416804869317+0100)\/","title":"Jönköping","exactlocation":"Åsenvägen","description":"Stängd för genomfart fr o m månd 24/11. Trafiken leds delvis om pga ett arbete i höjd med Kristinedals äldreboende. Åsenvägen beräknas öppnas 13/12 igen.","latitude":57.779798111199149,"longitude":14.162714906803089,"category":0,"subcategory":"Trafikstörning"},{"id":1293455,"priority":3,"createddate":"\/Date(1416805408130+0100)\/","title":"Rv 50 Skänninge-Motala","exactlocation":"Skänninge-Fågelsta","description":"Flaggvakter reglerar trafiken kl 06-18. Lednings- och kabelarbete.","latitude":58.449649810791016,"longitude":15.048783302307129,"category":0,"subcategory":"Vägarbete"},{"id":1297653,"priority":3,"createddate":"\/Date(1416818323793+0100)\/","title":"Rv 46 Ulricehamn-Falköping","exactlocation":"Ulricehamn-Kulla","description":"Räckesarbete.","latitude":57.8146858215332,"longitude":13.419770240783691,"category":0,"subcategory":"Vägarbete"},{"id":1297746,"priority":5,"createddate":"\/Date(1416837058657+0100)\/","title":"Rv 70 Cirkulationsplats Rättvik","exactlocation":"","description":"Grävarbete för nytt fundament till belysningsstolpe.","latitude":60.8819465637207,"longitude":15.11844539642334,"category":0,"subcategory":"Vägarbete"},{"id":1144336,"priority":3,"createddate":"\/Date(1416848054510+0100)\/","title":"Guldheden","exactlocation":"Wavrinskys plats - Kapellplatsen ","description":"Efter ett långvarigt vägarbete med stopp för all trafik att köra Guldheden-Ashebergsgatan, är det nu öppet  för trafik igen.","latitude":57.68997948327582,"longitude":11.970247137932155,"category":0,"subcategory":"Vägarbete"},{"id":1269645,"priority":5,"createddate":"\/Date(1416848965617+0100)\/","title":"Lv 587 Jordfallsbron","exactlocation":"","description":"Risk för kö när man passerar vägarbetet.","latitude":57.855087280273438,"longitude":12.01069164276123,"category":0,"subcategory":"Vägarbete"},{"id":1273233,"priority":5,"createddate":"\/Date(1416848973433+0100)\/","title":"Lv 180 Alingsås","exactlocation":"I höjd med ICA Maxi","description":"Nybygge av rondell.","latitude":57.923957824707031,"longitude":12.548768997192383,"category":0,"subcategory":"Vägarbete"},{"id":1263771,"priority":5,"createddate":"\/Date(1416849001250+0100)\/","title":"Göteborg","exactlocation":"Norra Hamngatan ","description":" Rivning och uppbyggnad av kanalmur. Vägen kommer att vara avstängd mellan Kämpebron och Fontänbron.\n","latitude":57.706981658935547,"longitude":11.968127250671387,"category":0,"subcategory":"Vägarbete"},{"id":1249864,"priority":5,"createddate":"\/Date(1416849024807+0100)\/","title":"E20 Alingsås-Göteborg\n","exactlocation":"Jonseredsmotet (82)-Partillemotet (80)\n","description":"Bullerskyddsåtgärder i riktning mot Göteborg. Höger körfält kommer att vara stängt fram till den 31 december.\n","latitude":57.739730834960938,"longitude":12.124317169189453,"category":0,"subcategory":"Vägarbete"},{"id":1293322,"priority":5,"createddate":"\/Date(1416849142867+0100)\/","title":"Sävenäsleden","exactlocation":"","description":"Broreperation.","latitude":57.726161956787109,"longitude":12.023475646972656,"category":0,"subcategory":"Vägarbete"},{"id":1264122,"priority":5,"createddate":"\/Date(1416924525563+0100)\/","title":"Västra Götalands län","exactlocation":"","description":"Fuktiga och våta vägbanor.","latitude":58.0697441,"longitude":12.3502855,"category":0,"subcategory":"Trafikstörning"},{"id":1263647,"priority":5,"createddate":"\/Date(1416930507257+0100)\/","title":"Kronobergs län","exactlocation":"","description":"Övervägande fuktiga vägar.rISK FÖR HALKA TILL KVÄLLEN.","latitude":56.7490959,"longitude":14.3933315,"category":0,"subcategory":"Halkvarning"},{"id":1295493,"priority":3,"createddate":"\/Date(1416803408307+0100)\/","title":"Norra länken öppnar 30 nov. kl 14:00","exactlocation":"Frescati","description":"Infart för trafik som vill mot Värtan","latitude":59.3607958420011,"longitude":18.056147618156558,"category":0,"subcategory":"Trafikstörning"},{"id":1295495,"priority":3,"createddate":"\/Date(1416803408477+0100)\/","title":"Norra länken öppnar 30 nov. kl 14:00","exactlocation":"Haga Södra","description":"Infart för trafik mot Frescati och Värtan. \n","latitude":59.353114798023711,"longitude":18.039666642786191,"category":0,"subcategory":"Trafikstörning"},{"id":1295489,"priority":3,"createddate":"\/Date(1416803408917+0100)\/","title":"Norra länken öppnar 30 nov. kl 14:00","exactlocation":"Värtan","description":"Tre utfarten att välja på Frescati, Roslagstull eller Haga Södra","latitude":59.350933443982171,"longitude":18.10368352642142,"category":0,"subcategory":"Trafikstörning"},{"id":1295498,"priority":3,"createddate":"\/Date(1416809271210+0100)\/","title":"Norra länken öppnar 30 nov. kl 14:00 ","exactlocation":"Lill-Jansskogen Björnnäsvägen","description":"Stängs för genomfartstrafik i samband med Norra länkens öppnande","latitude":59.356665472369812,"longitude":18.082211044132162,"category":0,"subcategory":"Trafikstörning"},{"id":1295492,"priority":3,"createddate":"\/Date(1416803407223+0100)\/","title":"Norra länken öppnar 30 nov. kl 14:00\n","exactlocation":"Roslagstull","description":"Infart för trafik mot Värtan","latitude":59.3516210598397,"longitude":18.056380181308541,"category":0,"subcategory":"Trafikstörning"},{"id":1292348,"priority":3,"createddate":"\/Date(1416985323867+0100)\/","title":"E6 Kålleredsmotet -Torrekullamotet","exactlocation":"Brännemadsbron","description":"Lagning av bropelare i mitten av vägen. Arbetet beräknas pågå till 31 januari 2015.","latitude":57.611381530761719,"longitude":12.045278549194336,"category":0,"subcategory":"Vägarbete"},{"id":1299343,"priority":3,"createddate":"\/Date(1416998109833+0100)\/","title":"Rv 70 Enköping-Sala","exactlocation":"Vid Fjärdhundra","description":"Broarbete med sänkt hastighet. ","latitude":59.769515991210938,"longitude":16.911821365356445,"category":0,"subcategory":"Vägarbete"},{"id":1299462,"priority":3,"createddate":"\/Date(1417010976087+0100)\/","title":"E18/E20 Arboga-Örebro","exactlocation":"Nära E20 i Arboga ","description":"Beläggningsarbete.","latitude":59.404861450195312,"longitude":15.754440307617187,"category":0,"subcategory":"Vägarbete"},{"id":1255524,"priority":3,"createddate":"\/Date(1417062910950+0100)\/","title":"E4 Huskvarna","exactlocation":"Huskvarna N (101), i båda riktningar","description":"Avstängt körfält. Arbete med bullerplank.","latitude":57.816932678222656,"longitude":14.271590232849121,"category":0,"subcategory":"Vägarbete"},{"id":1283169,"priority":3,"createddate":"\/Date(1417063077223+0100)\/","title":"Området kring Linköping","exactlocation":"","description":"Kolonner med många militärfordon i området vecka 48 (24-30 nov). Trafikanter uppmanas att om möjligt undvika aktuella vägar och inte göra omkörningar där det inte är motorväg.","latitude":58.383396148681641,"longitude":15.674928665161133,"category":0,"subcategory":"Trafikstörning"},{"id":1293336,"priority":3,"createddate":"\/Date(1417065156363+0100)\/","title":"E45 Hökbäck-Lit","exactlocation":"","description":"Nedsatt hastighet till 30 km/t på bron pga arbete.","latitude":63.3145866394043,"longitude":14.867941856384277,"category":0,"subcategory":"Vägarbete"},{"id":1297072,"priority":3,"createddate":"\/Date(1417065681390+0100)\/","title":"Överkalix kommun","exactlocation":"Röduppleden","description":"Färjan ersatt av isväg. Bruttovikt för fordon: 2 ton.","latitude":66.485633850097656,"longitude":22.777805328369141,"category":0,"subcategory":"Trafikstörning"},{"id":1299283,"priority":3,"createddate":"\/Date(1417066208660+0100)\/","title":"Lv 205 Karlskoga-Grythyttan","exactlocation":"Kärne-Kedjeåsen","description":"Nedsatt hastighet till 50 km/t.","latitude":59.463092803955078,"longitude":14.502652168273926,"category":0,"subcategory":"Vägarbete"},{"id":1299518,"priority":3,"createddate":"\/Date(1417068138213+0100)\/","title":"Rv 56 Kungsör-Katrineholm","exactlocation":"Mellan Äs och Bie ","description":"Beläggningsarbete.","latitude":59.151985168457031,"longitude":16.108791351318359,"category":0,"subcategory":"Vägarbete"},{"id":1294935,"priority":3,"createddate":"\/Date(1417070694783+0100)\/","title":"E16 Hofors-Ängelsfors","exactlocation":"I närheten av Edsken","description":"Trafiken regleras med ljussignaler.","latitude":60.544136047363281,"longitude":16.218639373779297,"category":0,"subcategory":"Vägarbete"},{"id":1299851,"priority":3,"createddate":"\/Date(1417070887417+0100)\/","title":"Norra länken öppnar 30 nov. kl 14:00","exactlocation":"Valhallavägen och Lidingövägen","description":"Linjer för busskörfält målade i körbanan, de träder i kraft på måndag morgon. ","latitude":59.345937335529413,"longitude":18.069979365054955,"category":0,"subcategory":"Trafikstörning"},{"id":1298541,"priority":3,"createddate":"\/Date(1417075898050+0100)\/","title":"E45 Gullbergsmotet-Marieholmsmotet","exactlocation":"I riktning mot Karlstad","description":"Vägarbete.","latitude":57.720874786376953,"longitude":11.995035171508789,"category":0,"subcategory":"Vägarbete"},{"id":1299171,"priority":3,"createddate":"\/Date(1417076232857+0100)\/","title":"E4 Dalkarkså-Rickleå","exactlocation":"Bygdeå Norra -tpl Sävar Norra riktning mot Sundsvall","description":"Vägarbete. Tillfällig hastighetsnedsättning vid arbetet 30 km/tim.","latitude":64.065597534179688,"longitude":20.849803924560547,"category":0,"subcategory":"Vägarbete"},{"id":1298815,"priority":3,"createddate":"\/Date(1417081635103+0100)\/","title":"E6 Göteborg-Kungälv","exactlocation":"Mellan Brantingsmotet och Brunnsbomotet","description":"Beläggning och fräsning.","latitude":57.725151062011719,"longitude":11.963788032531738,"category":2,"subcategory":"Vägarbete"},{"id":1298740,"priority":3,"createddate":"\/Date(1417083261977+0100)\/","title":"E4 Hyttön-tpl Gävle Södra","exactlocation":"Båda körriktningar","description":"Röjningsarbete i mittremsa mellan körbanorna. Arbetet utförs vardagar kl 07:00-16:00","latitude":60.573589324951172,"longitude":17.229345321655273,"category":0,"subcategory":"Vägarbete"},{"id":1300083,"priority":3,"createddate":"\/Date(1417090653947+0100)\/","title":"Lv 190 Göteborg-Gråbo","exactlocation":"Olofstorp","description":"Vägarbete i riktning mot Gråbo","latitude":57.815376281738281,"longitude":12.189538955688477,"category":0,"subcategory":"Vägarbete"},{"id":1300156,"priority":3,"createddate":"\/Date(1417096700300+0100)\/","title":"Lv 149 Kappelshamn","exactlocation":"","description":"Underhållsarbete.","latitude":57.853416442871094,"longitude":18.778120040893555,"category":2,"subcategory":"Vägarbete"},{"id":1300161,"priority":3,"createddate":"\/Date(1417097497767+0100)\/","title":"Rv 83 Järvsö","exactlocation":"","description":"Kabelarbete.","latitude":61.701442718505859,"longitude":16.164934158325195,"category":0,"subcategory":"Vägarbete"},{"id":1299429,"priority":3,"createddate":"\/Date(1417106646750+0100)\/","title":"Lv 906 Eds Kyrka-Österrå ","exactlocation":"","description":"Vägen avstängd. Akut reparation av vägskada.","latitude":63.3035888671875,"longitude":17.165678024291992,"category":0,"subcategory":"Vägarbete"},{"id":1300263,"priority":3,"createddate":"\/Date(1417107829530+0100)\/","title":"Lv 660 Trevlinge–Sandbol","exactlocation":"","description":"Kabelarbete på sträckan.","latitude":59.939731597900391,"longitude":17.883937835693359,"category":0,"subcategory":"Vägarbete"},{"id":1298812,"priority":3,"createddate":"\/Date(1417111224037+0100)\/","title":"E6 Kungälv-Göteborg","exactlocation":"Vid Klarebergsmotet (82) riktning söderut","description":"Underhållsarbete","latitude":57.810920715332031,"longitude":12.006141662597656,"category":0,"subcategory":"Vägarbete"},{"id":1300356,"priority":3,"createddate":"\/Date(1417118407307+0100)\/","title":"Rv 23 Älmhult","exactlocation":"Älmhult Södra och Handelsområde","description":"Ombyggnad förbifart Älmhult. Trafiken leds förbi på en tillfällig väg.","latitude":56.543312072753906,"longitude":14.153573989868164,"category":0,"subcategory":"Vägarbete"},{"id":1298791,"priority":3,"createddate":"\/Date(1417150569190+0100)\/","title":"Marks kommun","exactlocation":"Sätilaskolan","description":"Sätilaskolans är under fredagen stängd för åk 7 och 8. Åk 9 har undervisning. Orsaken är åtgärder som måste genomföras efter tidigare takras.","latitude":57.544399341127871,"longitude":12.440167953776731,"category":3,"subcategory":"Övrigt"},{"id":1299506,"priority":3,"createddate":"\/Date(1417152883783+0100)\/","title":"Solna","exactlocation":"Sweden International Horse Show, Friends Arena den 27-30 november","description":"Tiotusentals besökare väntas till evenemangets fyra dagar. Besökare uppmanas att åka kollektivt fram till arenan. ","latitude":59.3725471496582,"longitude":18.001064300537109,"category":0,"subcategory":"Trafikstörning"},{"id":1264120,"priority":5,"createddate":"\/Date(1417155651857+0100)\/","title":"Hallands län","exactlocation":"","description":"Halt väglag på mindre vägar i området mellen Halmstad och Falkenberg.","latitude":56.9494667,"longitude":12.8037291,"category":0,"subcategory":"Halkvarning"},{"id":1298201,"priority":3,"createddate":"\/Date(1417157773753+0100)\/","title":"Rv 23 Höör-Snogeröd","exactlocation":"Vid Gamla Bo","description":"Risk för köer. Trafiken regleras med vakt.","latitude":55.866470336914063,"longitude":13.496500968933105,"category":0,"subcategory":"Vägarbete"},{"id":1300614,"priority":3,"createddate":"\/Date(1417162463437+0100)\/","title":"E45 Göteborg-Bohus","exactlocation":"Vid Lärjemotet riktning mot Göteborg","description":"Belysningsarbete under vardagar 09-15","latitude":57.7618408203125,"longitude":12.005104064941406,"category":0,"subcategory":"Vägarbete"},{"id":1300629,"priority":3,"createddate":"\/Date(1417163613807+0100)\/","title":"E20 Alingsås-Hästerydsmotet ","exactlocation":"","description":" Vägen avstängd mellan Hedvigsberg och Hästerydsmotet för trafik i södergående riktning kl 20.00-06.00\n","latitude":57.902400970458984,"longitude":12.49781322479248,"category":0,"subcategory":"Vägarbete"},{"id":1293942,"priority":3,"createddate":"\/Date(1417163633600+0100)\/","title":"Uppsala","exactlocation":"Stora torget ","description":"Torget avstängt för busstrafik under Musikhjälpen. Mellan 1/12 och 16/12. Trångt på bland annat Östra Ågatan och Bangårdsgatan","latitude":59.867568193579871,"longitude":17.640432160692505,"category":1,"subcategory":"Buss"},{"id":1300574,"priority":3,"createddate":"\/Date(1417163920097+0100)\/","title":"E4 Nyadal-Skullersta","exactlocation":"","description":"Reparation av beläggning med start 1 december kl 07:00 och pågår fram till 2 december kl 16:00.","latitude":62.839241027832031,"longitude":17.972726821899414,"category":0,"subcategory":"Vägarbete"},{"id":1300644,"priority":3,"createddate":"\/Date(1417165368783+0100)\/","title":"Lv 272  Sandviken, i båda riktningar.","exactlocation":"","description":" Belysningasrbete","latitude":60.628974914550781,"longitude":16.784378051757813,"category":0,"subcategory":"Vägarbete"},{"id":1300632,"priority":3,"createddate":"\/Date(1417165502610+0100)\/","title":"E6 Uddevalla–Munkedal","exactlocation":"Vid Saltkällan, i riktning mot Munkedal","description":"Asfalteringsarbete.","latitude":58.436489105224609,"longitude":11.708499908447266,"category":0,"subcategory":"Vägarbete"},{"id":1300686,"priority":3,"createddate":"\/Date(1417167295297+0100)\/","title":"Halmstad","exactlocation":"Slottsjordsvägen, från Skepparegatan till Slottsrondellen","description":"Avstängt månd 1/12 till torsd 4/12.","latitude":56.670523460623528,"longitude":12.8529426316641,"category":2,"subcategory":"Vägarbete"},{"id":1300825,"priority":3,"createddate":"\/Date(1417184592580+0100)\/","title":"Göteborg","exactlocation":"","description":"Trafikolyckan vid Linnéplatsen ger förseningar på linje 16 mot Fyrktorget, BlåExpress mot Kullavik och Särögården samt Rosa Express.","latitude":57.659324607594165,"longitude":11.766306700631679,"category":1,"subcategory":"Buss"},{"id":1300588,"priority":3,"createddate":"\/Date(1417185976527+0100)\/","title":"E4 Råneå","exactlocation":"Mellan tpl Råneå norra och tpl Råneå södra","description":"Vägen avstängd mellan klockan 8:30 - 16 under perioden 1 - 2 december. Omledning via lv 692.","latitude":65.845016479492187,"longitude":22.297565460205078,"category":0,"subcategory":"Vägarbete"},{"id":1300887,"priority":3,"createddate":"\/Date(1417187573123+0100)\/","title":"Orust Lv 770 ","exactlocation":"Båda riktningar","description":"Underhållsarbete","latitude":58.1583366394043,"longitude":11.65253734588623,"category":2,"subcategory":"Vägarbete"},{"id":1300890,"priority":3,"createddate":"\/Date(1417187653657+0100)\/","title":"Lv 737 i Orusts kommun i Västra Götalands län, i .","exactlocation":"Vid Härlycke i båda riktningar","description":"Underhållsarbete","latitude":58.155925750732422,"longitude":11.642884254455566,"category":2,"subcategory":"Vägarbete"},{"id":1300880,"priority":3,"createddate":"\/Date(1417187714133+0100)\/","title":"Orust  Lv 733   ","exactlocation":"Mellan Härlycke och Hjälmvik båda riktningar","description":"Underhållsarbete","latitude":58.141029357910156,"longitude":11.653024673461914,"category":2,"subcategory":"Vägarbete"},{"id":1300967,"priority":3,"createddate":"\/Date(1417193063873+0100)\/","title":"Göteborg","exactlocation":"Linje 513 försenad 20 minuter","description":"","latitude":57.659324607594165,"longitude":11.766306700631679,"category":1,"subcategory":"Buss"},{"id":1263645,"priority":5,"createddate":"\/Date(1417235854347+0100)\/","title":"Blekinge län","exactlocation":"","description":"","latitude":56.3117943,"longitude":15.2829609,"category":0,"subcategory":"Halkvarning"},{"id":1299702,"priority":3,"createddate":"\/Date(1417240637333+0100)\/","title":"Lund-Åkarp","exactlocation":"","description":"Söndag 30 november kl 23:20 till måndag 1 december kl 05:10. Förseningar kan förekomma och vissa tåg blir inställda. ","latitude":55.683747220813494,"longitude":13.150946775243728,"category":1,"subcategory":"Tåg"},{"id":1301283,"priority":3,"createddate":"\/Date(1417268247877+0100)\/","title":"Stockholms Central - Bålsta","exactlocation":"","description":"Ett signalfel i Kungsängen medför förseningar på upp till tjugo minuter på samtliga tåg. Ingen prognos för närvarande.\n","latitude":59.459342990578691,"longitude":17.781286627306777,"category":1,"subcategory":"Tåg"},{"id":1301298,"priority":3,"createddate":"\/Date(1417269707490+0100)\/","title":"Göteborg","exactlocation":"Kvastekulla - Stärtered ","description":"Ingen busstrafik på sträckan pga olycka. Närmaste hållplats är Skulltorpsvägen och Högen vändplats. ","latitude":57.659324607594165,"longitude":11.766306700631679,"category":1,"subcategory":"Buss"},{"id":1285951,"priority":3,"createddate":"\/Date(1417271077703+0100)\/","title":"Hässleholm–Kvidinge","exactlocation":"","description":"Tågen är inställda på sträckan lördag 19:10 till måndag 03:50 pga underhållsarbete. Bussar ersätter inställda tåg.","latitude":56.101871756856077,"longitude":13.228373894256455,"category":1,"subcategory":"Tåg"},{"id":1301323,"priority":3,"createddate":"\/Date(1417275168057+0100)\/","title":"E4 Jönköping-Husqvarna","exactlocation":"Trafikplats Ekhagen [98] ","description":"Personer som rör sig över vägen, svåra att upptäcka.","latitude":57.780292510986328,"longitude":14.227627754211426,"category":0,"subcategory":"Trafikstörning"},{"id":1301324,"priority":3,"createddate":"\/Date(1417277550447+0100)\/","title":"Ludvika-Frövi","exactlocation":"","description":"Det är störningar i tågtrafiken.","latitude":59.939493278268593,"longitude":15.073407965090306,"category":1,"subcategory":"Tåg"},{"id":1287440,"priority":3,"createddate":"\/Date(1417308518497+0100)\/","title":"Lv 1936 Bjärnum","exactlocation":"","description":"Avständ väg. Trafiken leds om.","latitude":56.295093536376953,"longitude":13.722196578979492,"category":0,"subcategory":"Vägarbete"}],"pagination":{"page":1,"size":100,"totalhits":110,"totalpages":2,"nextpage":"http://api.sr.se/api/v2/traffic/messages?size=100&format=json&page=2"}};
        data.messages = data.messages
            .map(function(message) {
                message.createddate = new Date(+message.createddate.slice(6, -7)).getTime();
                return message;
            })
            .sort(function(a, b) {
                return b.createddate - a.createddate;
            })
            .slice(0, 100);

        reply(data);
    }
});

if (!module.parent) {
    server.start(function() {
        console.log("Server started", server.info.uri);
    });
}

module.exports = server;
